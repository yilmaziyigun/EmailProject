@model EmailProject.Entities.Message
@{
    ViewData["Title"] = "Yeni Mesaj";
    Layout = null; // Eğer ana layout'un yoksa bunu kullanabilirsin, varsa kaldırabilirsin.
}

<!DOCTYPE html>
<html>
<head>
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

    <meta charset="utf-8" />
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-950 text-gray-200 font-sans antialiased">

    <div class="min-h-screen flex items-center justify-center p-6">

        <div class="w-full max-w-2xl bg-gray-900 rounded-2xl shadow-2xl border border-gray-800 overflow-hidden">

            <div class="bg-gray-800/50 px-8 py-6 border-b border-gray-800 flex items-center justify-between">
                <h2 class="text-xl font-bold text-white flex items-center gap-3">
                    <span class="p-2 bg-orange-500/10 rounded-lg text-orange-500">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg>
                    </span>
                    Yeni Mesaj Oluştur
                </h2>
                <a href="/Message/Inbox" class="text-gray-500 hover:text-white transition">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </a>
            </div>

            <form asp-action="CreateMessage" method="post" class="p-8 space-y-6">

                @Html.AntiForgeryToken()

                <div class="space-y-2">
                    <label class="block text-sm font-medium text-gray-400 ml-1">Kime</label>
                    <div class="relative group">
                        <input asp-for="ReceiverEmail"
                               placeholder="örnek@mail.com"
                               class="w-full bg-gray-800 border border-gray-700 px-4 py-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 transition-all placeholder-gray-600" />
                    </div>
                    <span asp-validation-for="ReceiverEmail" class="text-red-400 text-xs mt-1"></span>
                </div>

                <div class="space-y-2">
                    <label class="block text-sm font-medium text-gray-400 ml-1">Konu</label>
                    <input asp-for="Subject"
                           placeholder="Mesajınızın konusu nedir?"
                           class="w-full bg-gray-800 border border-gray-700 px-4 py-3 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500/50 focus:border-orange-500 transition-all placeholder-gray-600" />
                    <span asp-validation-for="Subject" class="text-red-400 text-xs mt-1"></span>
                </div>

                <div class="space-y-2">
                    <label class="block text-sm font-medium text-gray-400 ml-1">Mesajınız</label>

                    <div id="editor" class="rounded-xl border border-gray-700"></div>

                    <input type="hidden" name="MessageDetail" id="MessageDetail" />

                    <span asp-validation-for="MessageDetail"
                          class="text-red-400 text-xs mt-1"></span>
                </div>


                <div class="flex items-center justify-end gap-4 pt-4 border-t border-gray-800">

                    <a href="/Message/Inbox"
                       class="px-6 py-2.5 bg-gray-800 hover:bg-gray-700 text-gray-300 font-medium rounded-xl transition duration-200">
                        Vazgeç
                    </a>

                    <button type="submit"
                            class="flex items-center gap-2 px-8 py-2.5 bg-orange-500 hover:bg-orange-600 text-white font-bold rounded-xl shadow-lg shadow-orange-500/20 transition duration-200 active:scale-95">
                        <span>Gönder</span>
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>
                    </button>

                </div>

            </form>
            <script>
                var quill = new Quill('#editor', {
                    theme: 'snow',
                    modules: {
                        toolbar: [
                            ['bold', 'italic', 'underline'],
                            [{ 'list': 'ordered'}, { 'list': 'bullet' }],
                            ['link']
                        ]
                    }
                });

                // Dark Mode düzeltmesi
                document.querySelector('.ql-toolbar').classList.add('bg-gray-800','border-gray-700','text-white');
                document.querySelector('.ql-container').classList.add('bg-gray-800','border-gray-700','text-gray-200');

                // Form submit olduğunda HTML'i hidden input'a aktar
                document.querySelector('form').onsubmit = function () {
                    document.querySelector('#MessageDetail').value = quill.root.innerHTML;
                };
            </script>

        </div>

    </div>
    
    

    <style>
        .ql-toolbar {
            background: #1f2937 !important;
            border-color: #374151 !important;
        }

        .ql-container {
            background: #111827 !important;
            border-color: #374151 !important;
            min-height: 180px;
            color: #e5e7eb !important;
        }

        .ql-editor {
            color: #e5e7eb !important;
        }

        .ql-editor::before {
            color: #6b7280 !important;
        }
    </style>

</body>
</html>